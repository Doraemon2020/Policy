version = 1

##############################################
# Clash Meta ä¸“ç”¨å…¨å±€é…ç½®
##############################################

[template]
mixed-port = 7890
allow-lan = true
mode = "Rule"
log-level = "info"
external-controller = "127.0.0.1:9090"
global-client-fingerprint = "chrome"

[template.dns]
enable = true
listen = "0.0.0.0:53"
enhanced-mode = "fake-ip"
nameserver = [
  "https://223.5.5.5/dns-query",
  "https://8.8.8.8/dns-query"
]
fallback = [
  "https://1.1.1.1/dns-query"
]
[template.dns.fallback-filter]
geoip = true
geoip-code = "CN"

[template.tun]
enable = true
stack = "system"
dns-hijack = ["any:53"]

##############################################
# Subconverter è‡ªå®šä¹‰éƒ¨åˆ†
##############################################

[custom]
enable_rule_generator = true
overwrite_original_rules = true
add_emoji = true
remove_old_emoji = true

# -------------------------------
# èŠ‚ç‚¹åˆ†ç»„é…ç½®
# -------------------------------

[[custom_groups]]
name = "ğŸŒ æ’­æ”¾ç»„"
type = "select"
rule = [
    "[]â™»ï¸ è‡ªåŠ¨é€‰æ‹©",
    "[]ğŸ‡­ğŸ‡° Exé¦™æ¸¯",
    "[]ğŸ‡­ğŸ‡° ZHSé¦™æ¸¯",
    "[]âš¡ å…¨éƒ¨èŠ‚ç‚¹",
    "[]ğŸ“Œ å…¨éƒ¨èŠ‚ç‚¹",
    "^(?!.*(æ·±åœ³))(?=.*(?:é¦™æ¸¯|ä¹é¾™|é“ ç”²|å¥‘çº¦|HK|TVB)).*$",
    "[]DIRECT",
    "[]REJECT"
]

[[custom_groups]]
name = "ğŸ‡­ğŸ‡° éªŒè¯ç»„"
type = "select"
rule = [
    "[]ğŸ‡­ğŸ‡° é¦™æ¸¯åŸç”Ÿ",
    "[]ğŸ‡­ğŸ‡° ZHSä¹é¾™",
    "[]ğŸ‡­ğŸ‡° ZHSé“ ç”²",
    "[]ğŸ‡­ğŸ‡° ZHSå¥‘çº¦",
    "[]ğŸ‡­ğŸ‡° TVB",
    "[]ğŸ‡­ğŸ‡° HKT",
    "[]ğŸ“Œ å…¨éƒ¨èŠ‚ç‚¹",
    "[]DIRECT",
    "[]REJECT"
]

[[custom_groups]]
name = "ğŸ YouTube"
type = "select"
rule = [
    "[]â™»ï¸ è‡ªåŠ¨é€‰æ‹©",
    "[]ğŸ‡­ğŸ‡° Exé¦™æ¸¯",
    "[]ğŸ‡­ğŸ‡° ZHSé¦™æ¸¯",
    "[]ğŸ‡¹ğŸ‡¼ Exå°æ¹¾",
    "[]ğŸ‡¹ğŸ‡¼ ZHSå°æ¹¾",
    "[]ğŸ‡¸ğŸ‡¬ Exæ˜Ÿå›½",
    "[]ğŸ‡¸ğŸ‡¬ ZHSæ˜Ÿå›½",
    "[]ğŸ‡¯ğŸ‡µ Exæ—¥æœ¬",
    "[]ğŸ‡¯ğŸ‡µ ZHSæ—¥æœ¬",
    "[]ğŸ‡ºğŸ‡¸ Exç¾å›½",
    "[]ğŸ‡ºğŸ‡¸ ZHSç¾å›½",
    "[]âš¡ å…¨éƒ¨èŠ‚ç‚¹",
    "[]ğŸ“Œ å…¨éƒ¨èŠ‚ç‚¹",
    "[]DIRECT",
    "[]REJECT"
]

[[custom_groups]]
name = "â™»ï¸ è‡ªåŠ¨é€‰æ‹©"
type = "url-test"
url = "https://www.tvb.com"
interval = 20
tolerance = 50
rule = [
    "[]ğŸ‡­ğŸ‡° Exé¦™æ¸¯",
    "[]ğŸ‡­ğŸ‡° ZHSé¦™æ¸¯"
]

[[custom_groups]]
name = "ğŸ“º ViuTV"
type = "select"
rule = [
    "[]ğŸ‡­ğŸ‡° é¦™æ¸¯åŸç”Ÿ",
    "[]ğŸ‡­ğŸ‡° ZHSä¹é¾™",
    "[]ğŸ‡­ğŸ‡° ZHSé“ ç”²",
    "[]ğŸ‡­ğŸ‡° ZHSå¥‘çº¦",
    "[]DIRECT",
    "[]REJECT"
]

[[custom_groups]]
name = "ğŸ“º Netflix"
type = "select"
rule = [
    "[]ğŸŒ æ’­æ”¾ç»„",
    "[]â™»ï¸ è‡ªåŠ¨é€‰æ‹©",
    "[]ğŸ‡­ğŸ‡° Exé¦™æ¸¯",
    "[]ğŸ‡­ğŸ‡° ZHSé¦™æ¸¯",
    "[]ğŸ‡¹ğŸ‡¼ Exå°æ¹¾",
    "[]ğŸ‡¹ğŸ‡¼ ZHSå°æ¹¾",
    "[]ğŸ‡¸ğŸ‡¬ Exæ˜Ÿå›½",
    "[]ğŸ‡¸ğŸ‡¬ ZHSæ˜Ÿå›½",
    "[]ğŸ‡¯ğŸ‡µ Exæ—¥æœ¬",
    "[]ğŸ‡¯ğŸ‡µ ZHSæ—¥æœ¬",
    "[]ğŸ‡ºğŸ‡¸ Exç¾å›½",
    "[]ğŸ‡ºğŸ‡¸ ZHSç¾å›½",
    "[]âš¡ å…¨éƒ¨èŠ‚ç‚¹",
    "[]ğŸ“Œ å…¨éƒ¨èŠ‚ç‚¹",
    "[]DIRECT",
    "[]REJECT"
]

[[custom_groups]]
name = "BL"
type = "select"
rule = [
    "[]REJECT",
    "[]DIRECT"
]

[[custom_groups]]
name = "ğŸ›‘ æ‹¦æˆªè¿æ¥"
type = "select"
rule = [
    "[]REJECT",
    "[]DIRECT"
]

[[custom_groups]]
name = "âš¡ å…¨éƒ¨èŠ‚ç‚¹"
type = "url-test"
url = "http://www.gstatic.com/generate_204"
interval = 600
rule = [
    "^((?!ä¸­å›½|å›å›½|æ¸¸æˆ|é™é€Ÿ|ç»“ç®—|æµé‡).)*$"
]

[[custom_groups]]
name = "ğŸ“Œ å…¨éƒ¨èŠ‚ç‚¹"
type = "select"
rule = [".*"]

[[custom_groups]]
name = "ğŸ‡­ğŸ‡° é¦™æ¸¯åŸç”Ÿ"
type = "url-test"
url = "http://www.gstatic.com/generate_204"
interval = 30
rule = [
    "(HKT|ä¹é¾™|é“ ç”²|å¥‘çº¦|TVB)"
]

[[custom_groups]]
name = "ğŸ‡­ğŸ‡° ZHSä¹é¾™"
type = "url-test"
url = "http://www.gstatic.com/generate_204"
interval = 600
rule = ["(ä¹é¾™)"]

[[custom_groups]]
name = "ğŸ‡­ğŸ‡° ZHSé“ ç”²"
type = "url-test"
url = "http://www.gstatic.com/generate_204"
interval = 600
rule = ["(é“ ç”²)"]

[[custom_groups]]
name = "ğŸ‡­ğŸ‡° ZHSå¥‘çº¦"
type = "url-test"
url = "http://www.gstatic.com/generate_204"
interval = 600
rule = ["(å¥‘çº¦)"]

[[custom_groups]]
name = "ğŸ‡­ğŸ‡° HKT"
type = "url-test"
url = "http://www.gstatic.com/generate_204"
interval = 600
rule = ["(HKT)"]

[[custom_groups]]
name = "ğŸ‡­ğŸ‡° TVB"
type = "url-test"
url = "http://www.gstatic.com/generate_204"
interval = 600
rule = ["(TVB)"]

[[custom_groups]]
name = "ğŸ‡­ğŸ‡° Exé¦™æ¸¯"
type = "url-test"
url = "http://www.gstatic.com/generate_204"
interval = 600
rule = ["^(?!.*(æ·±åœ³))(?=.*(?:é¦™æ¸¯)).*$"]

[[custom_groups]]
name = "ğŸ‡¹ğŸ‡¼ Exå°æ¹¾"
type = "url-test"
url = "http://www.gstatic.com/generate_204"
interval = 600
rule = ["(?=.*(å°æ¹¾)(?!.*(åŠ¨ç”»))).*"]

[[custom_groups]]
name = "ğŸ‡¸ğŸ‡¬ Exæ˜Ÿå›½"
type = "url-test"
url = "http://www.gstatic.com/generate_204"
interval = 600
rule = [".*(?<!(æ›´))(æ–°åŠ å¡)(?!.*æ¸¸æˆ).*"]

[[custom_groups]]
name = "ğŸ‡ºğŸ‡¸ Exç¾å›½"
type = "url-test"
url = "http://www.gstatic.com/generate_204"
interval = 600
rule = ["(?=.*(ç¾å›½)(?!.*(æ¸¸æˆ))).*"]

[[custom_groups]]
name = "ğŸ‡¯ğŸ‡µ Exæ—¥æœ¬"
type = "url-test"
url = "http://www.gstatic.com/generate_204"
interval = 600
rule = ["(?=.*(æ—¥æœ¬)(?!.*(æ¸¸æˆ))).*"]

[[custom_groups]]
name = "ğŸ‡­ğŸ‡° ZHSé¦™æ¸¯"
type = "url-test"
url = "http://www.gstatic.com/generate_204"
interval = 600
rule = ["^(?=.*(?:HK))(?!.*(?:æ¸¸æˆ|é¦™æ¸¯)).*$"]

[[custom_groups]]
name = "ğŸ‡¹ğŸ‡¼ ZHSå°æ¹¾"
type = "url-test"
url = "http://www.gstatic.com/generate_204"
interval = 600
rule = ["(?=.*(TW)(?!.*(æ¸¸æˆ))).*"]

[[custom_groups]]
name = "ğŸ‡¸ğŸ‡¬ ZHSæ˜Ÿå›½"
type = "url-test"
url = "http://www.gstatic.com/generate_204"
interval = 600
rule = [".*(?<!(æ›´))(SG)(?!.*æ¸¸æˆ).*"]

[[custom_groups]]
name = "ğŸ‡ºğŸ‡¸ ZHSç¾å›½"
type = "url-test"
url = "http://www.gstatic.com/generate_204"
interval = 600
rule = ["(?=.*(US)(?!.*(æ¸¸æˆ))).*"]

[[custom_groups]]
name = "ğŸ‡¯ğŸ‡µ ZHSæ—¥æœ¬"
type = "url-test"
url = "http://www.gstatic.com/generate_204"
interval = 600
rule = ["(?=.*(JP)(?!.*(æ¸¸æˆ))).*"]

# -------------------------------
# è§„åˆ™é›†é…ç½®
# -------------------------------

[[rulesets]]
group = "BL"
ruleset = "https://raw.githubusercontent.com/Doraemon2020/Policy/refs/heads/master/Rules/Bilib.list"

[[rulesets]]
group = "ğŸ›‘ æ‹¦æˆªè¿æ¥"
ruleset = "https://raw.githubusercontent.com/Doraemon2020/Policy/master/Rules/TVB-AD.list"

[[rulesets]]
group = "DIRECT"
ruleset = "https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/LocalAreaNetwork.list"

[[rulesets]]
group = "DIRECT"
ruleset = "https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/UnBan.list"